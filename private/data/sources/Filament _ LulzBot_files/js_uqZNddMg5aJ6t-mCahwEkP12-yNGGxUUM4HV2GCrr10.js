!function(e){Drupal.Views={},Drupal.behaviors.viewsTabs={attach:function(i){e.viewsUi&&e.viewsUi.tabs&&e("#views-tabset").once("views-processed").viewsTabs({selectedClass:"active"}),e("a.views-remove-link").once("views-processed").click(function(i){var r=e(this).attr("id").replace("views-remove-link-","");e("#views-row-"+r).hide(),e("#views-removed-"+r).attr("checked",!0),i.preventDefault()}),e("a.display-remove-link").addClass("display-processed").click(function(){var i=e(this).attr("id").replace("display-remove-link-","");return e("#display-row-"+i).hide(),e("#display-removed-"+i).attr("checked",!0),!1})}},Drupal.Views.parseQueryString=function(e){var i={},r=e.indexOf("?");-1!=r&&(e=e.substring(r+1));var t=e.split("&");for(var s in t)if("string"==typeof t[s]){var n=t[s].split("=");"q"!=n[0]&&n[1]&&(i[decodeURIComponent(n[0].replace(/\+/g," "))]=decodeURIComponent(n[1].replace(/\+/g," ")))}return i},Drupal.Views.parseViewArgs=function(e,i){var r={},t=Drupal.Views.getPath(e);if(i&&t.substring(0,i.length+1)==i+"/"){var s=decodeURIComponent(t.substring(i.length+1,t.length));r.view_args=s,r.view_path=t}return r},Drupal.Views.pathPortion=function(e){var i=window.location.protocol;return e.substring(0,i.length)==i&&(e=e.substring(e.indexOf("/",i.length+2))),e},Drupal.Views.getPath=function(e){e=Drupal.Views.pathPortion(e),e=e.substring(Drupal.settings.basePath.length,e.length),"?q="==e.substring(0,3)&&(e=e.substring(3,e.length));var r=["#","?","&"];for(i in r)e.indexOf(r[i])>-1&&(e=e.substr(0,e.indexOf(r[i])));return e}}(jQuery);;
!function(t){Drupal.progressBar=function(r,e,i,s){this.id=r,this.method=i||"GET",this.updateCallback=e,this.errorCallback=s,this.element=t('<div class="progress" aria-live="polite"></div>').attr("id",r),this.element.html('<div class="bar"><div class="filled"></div></div><div class="percentage"></div><div class="message">&nbsp;</div>')},Drupal.progressBar.prototype.setProgress=function(r,e){r>=0&&100>=r&&(t("div.filled",this.element).css("width",r+"%"),t("div.percentage",this.element).html(r+"%")),t("div.message",this.element).html(e),this.updateCallback&&this.updateCallback(r,e,this)},Drupal.progressBar.prototype.startMonitoring=function(t,r){this.delay=r,this.uri=t,this.sendPing()},Drupal.progressBar.prototype.stopMonitoring=function(){clearTimeout(this.timer),this.uri=null},Drupal.progressBar.prototype.sendPing=function(){if(this.timer&&clearTimeout(this.timer),this.uri){var r=this;t.ajax({type:this.method,url:this.uri,data:"",dataType:"json",success:function(t){return 0==t.status?void r.displayError(t.data):(r.setProgress(t.percentage,t.message),void(r.timer=setTimeout(function(){r.sendPing()},r.delay)))},error:function(t){r.displayError(Drupal.ajaxError(t,r.uri))}})}},Drupal.progressBar.prototype.displayError=function(r){var e=t('<div class="messages error"></div>').html(r);t(this.element).before(e).hide(),this.errorCallback&&this.errorCallback(this)}}(jQuery);;
!function(e){Drupal.behaviors.ViewsAjaxView={},Drupal.behaviors.ViewsAjaxView.attach=function(){Drupal.settings&&Drupal.settings.views&&Drupal.settings.views.ajaxViews&&e.each(Drupal.settings.views.ajaxViews,function(e,t){Drupal.views.instances[e]=new Drupal.views.ajaxView(t)})},Drupal.views={},Drupal.views.instances={},Drupal.views.ajaxView=function(t){var i=".view-dom-id-"+t.view_dom_id;this.$view=e(i);var s=Drupal.settings.views.ajax_path;-1!=s.constructor.toString().indexOf("Array")&&(s=s[0]);var a=window.location.search||"";if(""!==a){var a=a.slice(1).replace(/q=[^&]+&?|&?render=[^&]+/,"");""!==a&&(a=(/\?/.test(s)?"&":"?")+a)}this.element_settings={url:s+a,submit:t,setClick:!0,event:"click",selector:i,progress:{type:"throbber"}},this.settings=t,this.$exposed_form=e("#views-exposed-form-"+t.view_name.replace(/_/g,"-")+"-"+t.view_display_id.replace(/_/g,"-")),this.$exposed_form.once(jQuery.proxy(this.attachExposedFormAjax,this)),this.$view.filter(jQuery.proxy(this.filterNestedViews,this)).once(jQuery.proxy(this.attachPagerAjax,this));var r=this.element_settings;r.event="RefreshView",this.refreshViewAjax=new Drupal.ajax(this.selector,this.$view,r)},Drupal.views.ajaxView.prototype.attachExposedFormAjax=function(){var t=e("input[type=submit], button[type=submit], input[type=image]",this.$exposed_form);t=t[0],this.exposedFormAjax=new Drupal.ajax(e(t).attr("id"),t,this.element_settings)},Drupal.views.ajaxView.prototype.filterNestedViews=function(){return!this.$view.parents(".view").size()},Drupal.views.ajaxView.prototype.attachPagerAjax=function(){this.$view.find("ul.pager > li > a, th.views-field a, .attachment .views-summary a").each(jQuery.proxy(this.attachPagerLinkAjax,this))},Drupal.views.ajaxView.prototype.attachPagerLinkAjax=function(t,i){var s=e(i),a={},r=s.attr("href");e.extend(a,this.settings,Drupal.Views.parseQueryString(r),Drupal.Views.parseViewArgs(r,this.settings.view_base_path)),e.extend(a,Drupal.Views.parseViewArgs(r,this.settings.view_base_path)),this.element_settings.submit=a,this.pagerAjax=new Drupal.ajax(!1,s,this.element_settings)},Drupal.ajax.prototype.commands.viewsScrollTop=function(t,i,s){for(var a=e(i.selector).offset(),r=i.selector;0==e(r).scrollTop()&&e(r).parent();)r=e(r).parent();a.top-10<e(r).scrollTop()&&e(r).animate({scrollTop:a.top-10},500)}}(jQuery);;
