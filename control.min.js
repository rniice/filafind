/*! materials-database 2016-02-08 */
var myApp=angular.module("myApp",["ngTouch","mp.colorPicker","rzModule","ui.bootstrap"]),base_query="http://localhost:8080/materials",filtered_query="",scope_struct={technology:"FDM",composition:"",filament_diameter:"1.75",color:"",opacity:"",location:"",manufacturer:"",cost:"",tags:"",bed_material:"",temp_bed:"",min_nozzle_diameter:""},scope_struct_reset=JSON.parse(JSON.stringify(scope_struct));myApp.controller("userCtrl",["$scope","$http",function(a,b){function c(a){filtered_query=base_query;for(var b in a)d(b,a[b]);e(filtered_query)}function d(a,b){a=a.toString(),b=b.toString(),filtered_query=""!=b?filtered_query.indexOf("?")>-1?filtered_query+"&"+a+"="+b:filtered_query+"?"+a+"="+b:filtered_query.indexOf("&")>-1?filtered_query.replace("&"+a+"=",""):filtered_query.replace("?"+a+"=","")}function e(a){b({method:"GET",url:a,config:""}).then(function(a){f(a)},function(a){alert("there was an error with your request")})}function f(b){b=g(b.data);var c=h(b,"cost"),d=c.slice(0,10);a.server_response=d}function g(a){var b;return b=JSON.parse(JSON.stringify(a))}function h(a,b){return a.sort(function(a,c){var d=a[b],e=c[b];return e>d?-1:d>e?1:0})}a.server_response="Available Materials: ",a.technology="FDM",a.composition="",a.filament_diameter="1.75",a.color="",a.opacity="",a.location="",a.manufacturer="",a.cost=["",""],a.tags="",a.bed_material="",a.temp_bed="",a.min_nozzle_diameter="",a.temp_extrude_default="",c(scope_struct),a.changeTechnology=function(b){a.technology=b,scope_struct.technology=b,c(scope_struct)},a.changeComposition=function(b){a.composition=b,scope_struct.composition=b,c(scope_struct)},a.changeFilamentDiameter=function(b){a.filament_diameter=b,scope_struct.filament_diameter=b,c(scope_struct)},a.changeManufacturer=function(b){a.manufacturer=b,scope_struct.manufacturer=b,c(scope_struct)},a.changeLocation=function(b){a.location=b,scope_struct.location=b,c(scope_struct)},a.changeCost=function(b,d){a.cost=[b,d],scope_struct.cost=[b,d],c(scope_struct)},a.changeColor=function(b){var d=b.substring(1);a.color=d,scope_struct.color=d,c(scope_struct)},a.disableColorFiltering=function(){a.color="",scope_struct.color="",c(scope_struct)},a.resetFiltering=function(){a.server_response="Available Materials: ",a.technology="FDM",a.composition="",a.filament_diameter="1.75",a.color="",a.opacity="",a.location="",a.manufacturer="",a.cost=["",""],a.slider_cost.minValue=10,a.slider_cost.maxValue=60,a.tags="",a.bed_material="",a.slider_bed_temp.value=25,a.min_nozzle_diameter="",a.slider_nozzle_temp.value=240,scope_struct=JSON.parse(JSON.stringify(scope_struct_reset)),c(scope_struct)},a.changeOpacity=function(b){a.opacity=b,scope_struct.opacity=b,c(scope_struct)},a.changeTags=function(b){a.tags=b,scope_struct.tags=b,c(scope_struct)},a.changeBedMtl=function(b){a.bed_material=b,scope_struct.bed_material=b,c(scope_struct)},a.changeBedTemp=function(b){a.temp_bed=b,scope_struct.temp_bed=b,c(scope_struct)},a.slider_nozzle_temp={value:240,options:{id:"nozzle-temp",floor:120,ceil:300,onChange:function(b,c){a.changeTempExtrudeDefault(c)},translate:function(a){return a+"°C"}}},a.slider_bed_temp={value:25,options:{id:"bed-temp",floor:25,ceil:150,onChange:function(b,c){a.changeBedTemp(c)},translate:function(a){return a+"°C"}}},a.slider_cost={minValue:10,maxValue:60,options:{id:"cost",floor:0,ceil:150,onChange:function(b,c,d){a.changeCost(c,d)},translate:function(a){return"$"+a}}},a.changeNozzleDiameter=function(b){a.min_nozzle_diameter=b,scope_struct.min_nozzle_diameter=b,c(scope_struct)},a.changeTempExtrudeDefault=function(b){a.temp_extrude_default=b,scope_struct.temp_extrude_default=b,c(scope_struct)},a.showMaterialDetails=function(b){a.processing_name=b.name,a.processing_technology=b.technology,a.processing_composition=b.composition,a.processing_filament_diameter=b.filament_diameter,a.processing_location=b.location,a.processing_manufacturer=b.manufacturer,a.processing_cost=b.cost,a.processing_temp_extrude_default=b.temp_extrude_default,a.processing_temp_min_extrude=b.temp_min_extrude,a.processing_temp_max_extrude=b.temp_max_extrude,a.processing_temp_bed=b.temp_bed,a.processing_extruder_fan_speed=b.extruder_fan_speed,a.processing_bed_material=b.bed_material,a.processing_extrusion_to_flow_multiplier=b.filament_extrusion_to_flow_multiplier,1==b.opacity?a.processing_opacity="Opaque":2==b.opacity?a.processing_opacity="Translucent":a.processing_opacity="Transparent",a.processing_website=b.website,a.processing_buy_now=b.buy_now}}]);